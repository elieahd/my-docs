# Text processing in command line with `awk`

`awk` is a command-line tool used for pattern scanning and processing. It's helps search, extract and transform text based on patterns (like regular expressions).

### Extracting fields

Extracts username (3rd field) and filenames (9th field) from `ls -l` output.

```sh
ls -l | awk '{ print $3, $9 }'
```

### Filtering

Shows processes using more than 50% CPU

```sh
ps aux | awk '$3 > 50 { print $0 }'
```

### Working with files

Let's say we have the following csv file : `items.csv`

```
item,price
ItemA,12.50
ItemB,7.99
ItemC,20.00
ItemD,5.25
ItemE,9.30
```

We can print file content with 

```sh
awk -F ',' '{ print $1, $2 }' items.csv
```

By default, awk treats whitespace (spaces or tabs) as the field separator. However, if you're working with CSV or tab-delimited files, you can easily change the field separator with the `-F` flag.

### Summing values

We can sum the prices with the following command 

```sh
awk -F ',' 'NR > 1 { sum += $2 } END { print "Total:", sum }' items.csv
```

By adding `NR > 1`, the first line will be omitted, since it's the header of the csv file

### Map based on condition
```sh
awk -F ',' 'NR > 1 { if ($2 > 10) print "High", $1; else print "Low", $1 }' items.csv
```